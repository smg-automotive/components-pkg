import { useState } from 'react';
import { Canvas, Meta, Story } from '@storybook/addon-docs';
import { action } from '@storybook/addon-actions';

import { Box } from '@chakra-ui/react';

import RangeFilterInput from './index';

<Meta
  title="Components/Filter/Range Input"
  component={RangeFilterInput}
  argTypes={{
    isDisabled: {
      control: 'boolean',
    },
  }}
  parameters={{
    actions: ['change', 'onBlur'],
  }}
/>
;

export const Template = ({ from, to, unit, ...rest }) => {
  const [currentValue, setCurrentValue] = useState({ from, to });
  const onChange = (value, name) => {
    setCurrentValue({
      ...currentValue,
      [name]: { ...currentValue[name], value },
    });
  };

    const reset = () => {
        setCurrentValue(prevState => {
           return{
               from: {
                   ...prevState.from,
                   value: undefined
               },
               to: {
                   ...prevState.to,
                   value: undefined
               }
           }
        })
    }

return (

<Box maxW={270}>
  <RangeFilterInput
    from={from}
    to={to}
    handleChange={(event) => {
      action('change')(event);
      onChange(event.value, event.name);
    }}
    onBlur={(event) => {
      action('onBlur')(event);
    }}
    unit={unit}
    {...rest}
  />
  <button onClick={reset}>Reset filter</button>
  <p>{from.value}</p>
  <p>{to.value}</p>
</Box>
); };

## Overview

<Canvas>
  <Story
    name="Overview"
    args={{
      unit: 'CHF',
      from: {
        name: 'priceFrom',
        placeholder: 'From',
      },
      to: {
        name: 'priceTo',
        placeholder: 'To',
      },
    }}
  >
    {Template.bind({})}
  </Story>
</Canvas>

## With initial value

<Canvas>
  <Story
    name="With initial value"
    args={{
      unit: 'CHF',
      from: {
        name: 'priceFrom',
        value: 100,
      },
      to: {
        name: 'priceTo',
        value: 200,
      },
    }}
  >
    {Template.bind({})}
  </Story>
</Canvas>

## Without unit

<Canvas>
  <Story
    name="Without unit"
    args={{
      from: {
        name: 'priceFrom',
        value: 100,
      },
      to: {
        name: 'priceTo',
        value: 200,
      },
    }}
  >
    {Template.bind({})}
  </Story>
</Canvas>
