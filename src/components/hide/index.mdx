import { Controls, Canvas, Meta, Story } from '@storybook/blocks';
import * as IndexStories from './index.stories.tsx';

<Meta of={IndexStories} />

# Hide

## Hide above a viewport

<Canvas>
  <Story of={IndexStories.HideAboveAViewport} />
</Canvas>

<Controls />

## Hide below a viewport

<Canvas>
  <Story of={IndexStories.HideBelowAViewport} />
</Canvas>

<Controls />

## Hide when matching a query

<Canvas>
  <Story of={IndexStories.HideWhenMatchingAQuery} />
</Canvas>

<Controls />

# Testing

If you are using testing-library, you will face some limitations in testing different viewport sizes. It is sometimes not possible to properly query the DOM elements inside the Show component because they would be hidden on the Jest viewport (`1024px`) size and testing-library does not allow you to overwrite that behavior. In that case, you should use the `hidden: true` flag as follows:

```tsx
/* eslint-disable import/no-unresolved, unicorn/filename-case */
import { render, screen, within } from '@testing-library/react';

import { Hide } from '@smg-automotive/components';

it('should show only on mobile devices', () => {
  render(
    <Hide above="sm">
      <a href="...">my-link</a>
    </Hide>,
  );
  const ctaContainer = screen.getByTestId('hide-container');
  expect(
    within(ctaContainer).getByRole('link', {
      name: 'my-link',
      // this is needed to find it in the DOM
      hidden: true,
    }),
  ).toBeInTheDocument();
});
```
