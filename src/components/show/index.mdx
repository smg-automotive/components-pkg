import { Canvas, Controls, Meta, Story } from '@storybook/blocks';

import * as IndexStories from './index.stories.tsx';

<Meta of={IndexStories} />

# Show

## Show above a viewport

<Canvas>
  <Story of={IndexStories.ShowAboveAViewport} />
</Canvas>

<Controls />

## Show below a viewport

<Canvas>
  <Story of={IndexStories.ShowBelowAViewport} />
</Canvas>

<Controls />

## Show when matching a query

<Canvas>
  <Story of={IndexStories.ShowWhenMatchingAQuery} />
</Canvas>

<Controls />

# Testing

If you are using testing-library, you will face some limitations in testing different viewport sizes. It is sometimes not possible to properly query the DOM elements inside the Show component because they would be hidden on the Jest viewport (`1024px`) size and testing-library does not allow you to overwrite that behavior. In that case, you should use the `hidden: true` flag as follows:

```tsx
/* eslint-disable import/no-unresolved, unicorn/filename-case */
import { render, screen, within } from '@testing-library/react';

import { Show } from '@smg-automotive/components';

it('should show the link on desktop devices', () => {
  render(
    <Show above="md">
      <a href="...">my-link</a>
    </Show>,
  );
  const ctaContainer = screen.getByTestId('show-container');
  expect(
    within(ctaContainer).getByRole('link', {
      name: 'my-link',
      // this is needed to find it in the DOM
      hidden: true,
    }),
  ).toBeInTheDocument();
});
```
