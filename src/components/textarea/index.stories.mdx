import { useState } from 'react';

import { ArgsTable, Canvas, Meta, Story } from '@storybook/addon-docs';
import { action } from '@storybook/addon-actions';

import { Box } from '@chakra-ui/react';

import Textarea from './index.tsx';

<Meta title="Components/Forms/Textarea" component={Textarea} />

export const Container = ({ children }) => {
  return (
    <Box w="100%" maxW="250px">
      {children}
    </Box>
  );
};

export const Template = ({ value, onChange, onBlur, onFocus, ...args }) => {
  const [currentValue, setCurrentValue] = useState(value);
  const onChangeHandler = onChange ? action('change') : () => {};
  return (
    <Container>
      <Textarea
        {...args}
        name="Control"
        onBlur={onBlur ? action('blur') : undefined}
        onFocus={onFocus ? action('focus') : undefined}
        onChange={
          value
            ? (e) => {
                setCurrentValue(e.target.value);
                onChangeHandler(e);
              }
            : onChangeHandler
        }
        value={value ? currentValue : undefined}
      />
    </Container>
  );
};

# Text area

## Overview

<Canvas>
  <Story
    name="Overview"
    args={{
      placeholder: 'Placeholder',
      isInvalid: false,
      isDisabled: false,
      autoFocus: false,
      onChange: true,
      onFocus: false,
      onBlur: false,
    }}
  >
    {Template.bind({})}
  </Story>
</Canvas>

<ArgsTable story="Overview" />

### Focused

<Canvas>
  <Story
    name="Focused"
    args={{
      placeholder: 'Placeholder',
      isInvalid: false,
      isDisabled: false,
      autoFocus: true,
    }}
  >
    {Template.bind({})}
  </Story>
</Canvas>

## Invalid

<Canvas>
  <Story
    name="Invalid"
    args={{
      placeholder: 'Placeholder',
      isInvalid: true,
      isDisabled: false,
      autoFocus: false,
    }}
  >
    {Template.bind({})}
  </Story>
</Canvas>

## Disabled

<Canvas>
  <Story
    name="Didabled"
    args={{
      placeholder: 'Placeholder',
      isDisabled: true,
      isInvalid: false,
      autoFocus: false,
    }}
  >
    {Template.bind({})}
  </Story>
</Canvas>
