import { Canvas, Meta, Story } from '@storybook/addon-docs';
import { action } from '@storybook/addon-actions';

import Carousel from './index.tsx';
import FullHeight from '../fullHeight';
import Flex from '../flex';
import Box from '../box';

<Meta
  title="Components/Data display/Carousel"
  component={Carousel}
  argTypes={{
    fullScreen: {
      table: {
        disable: true,
      },
    },
    numberOfSlides: {
      control: { type: 'number', min: 1, max: 20, step: 1 },
    },
  }}
  parameters={{
    layout: 'fullscreen',
  }}
/>

export const images = [
  'https://placekitten.com/g/800/600',
  'https://placekitten.com/g/900/600',
  'https://placekitten.com/g/900/500',
  'https://placekitten.com/g/700/500',
  'https://placekitten.com/g/450/500',
  'https://placekitten.com/g/750/500',
  'https://placekitten.com/g/820/500',
  'https://placekitten.com/g/750/600',
  'https://placekitten.com/g/750/630',
  'https://placekitten.com/g/750/650',
  'https://placekitten.com/g/750/450',
  'https://placekitten.com/g/750/480',
  'https://placekitten.com/g/750/490',
  'https://placekitten.com/g/870/400',
  'https://placekitten.com/g/980/400',
  'https://placekitten.com/g/950/400',
  'https://placekitten.com/g/950/450',
  'https://placekitten.com/g/930/400',
  'https://placekitten.com/g/930/500',
  'https://placekitten.com/g/940/600',
];

export const Slide = ({ index, fullScreen }) => (
  <Flex
    justifyContent="center"
    alignItems="center"
    height={fullScreen ? 'full' : '600px'}
    position="relative"
  >
    <img
      src={images[index]}
      alt="a great kitten"
      style={{
        objectFit: 'cover',
        height: '100%',
        width: '100%',
      }}
    />
    <Box position="absolute" backgroundColor="gray.400" p="md" color="white">
      Slide {index}
    </Box>
  </Flex>
);

export const Template = (args) => (
  <FullHeight>
    <Carousel
      {...args}
      onSlideClick={args.onSlideClick ? action('onSlideClick') : undefined}
    >
      {Array(args.numberOfSlides || 6)
        .fill(0)
        .map((_, i) => (
          <Slide
            index={i + 1}
            key={`slide-${i + 1}`}
            fullScreen={args.fullScreen}
          />
        ))}
    </Carousel>
  </FullHeight>
);

# Carousel

## Overview

<Canvas>
  <Story
    name="Overview"
    args={{
      startIndex: 0,
      onSlideClick: true,
      fullScreen: false,
      numberOfSlides: 6,
    }}
  >
    {Template.bind({})}
  </Story>
</Canvas>

## Full Screen

<Canvas>
  <Story
    name="Full screen"
    args={{
      startIndex: 0,
      onSlideClick: true,
      fullScreen: true,
      numberOfSlides: 6,
    }}
  >
    {Template.bind({})}
  </Story>
</Canvas>
